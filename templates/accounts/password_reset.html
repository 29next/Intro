{% extends 'layouts/layout.html' %}
{% load i18n %}
{% load nexus_tags %}

{% block title %}
    {% if page_type == 'reset_via_email' %}
        {% trans 'Password reset' %} | {{ block.super }}
    {% elif page_type == "resetting" %}
        {% trans 'Password reset email sent' %} | {{ block.super }}
    {% elif page_type in "new_password,reset_password" %}
        {% trans 'Enter a new password' %} | {{ block.super }}
    {% elif page_type == "reset_complete" %}
        {% trans 'Password reset complete' %} | {{ block.super }}
    {% elif page_type ==  'set_anonymous_password' %}
        {% trans 'Enter a new password' %} | {{ block.super }}
    {% endif %}
{% endblock %}

{% block breadcrumbs %}
<div class="page-title">
    <div class="container">
        <div class="column">
            <ul class="breadcrumbs">
                <li><a href="{{ homepage_url }}">{% trans 'Home' %}</a>
                </li>
                <li class="separator">&nbsp;</li>
                {% if page_type == 'reset_via_email' %}
                    <li><a href="{% url 'customer:profile-view' %}">{% trans "Account" %}</a></li>
                    <li class="separator">&nbsp;</li>
                    <li>{% trans 'Password reset' %}</li>
                {% elif page_type == "resetting" %}
                    <li><a href="{% url 'password-reset' %}">{% trans 'Password reset' %}</a></li>
                    <li class="separator">&nbsp;</li>
                    <li>{% trans 'Email sent' %}</li>
                {% elif page_type in "new_password,reset_password" %}
                    <li><a href="{% url 'password-reset' %}">{% trans 'Password reset' %}</a></li>
                    <li class="separator">&nbsp;</li>
                    <li>{% trans 'Enter a new password' %}</li>
                {% elif page_type == "reset_complete" %}
                    <li><a href="{% url 'password-reset' %}">{% trans 'Password reset' %}</a></li>
                    <li class="separator">&nbsp;</li>
                    <li>{% trans 'Complete' %}</li>
                {% elif page_type ==  'set_anonymous_password' %}
                    <li><a href="{% url 'password-reset' %}">{% trans 'Account' %}</a></li>
                    <li class="separator">&nbsp;</li>
                    <li>{% trans 'Password Recovery' %}</li>
                {% endif %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
    {% if page_type == 'reset_via_email' %}
    <div class="container padding-bottom-3x mb-1 pt-md-5">
        <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
            <h2>{% trans "Password reset" %}</h2>
            <p>{% trans "Forgotten your password? Enter your e-mail address below, and we'll e-mail instructions for setting a new one." %}</p>
            <form class="card mt-4" id="password_reset_form" action="." method="post">
                {% csrf_token %}
                <div class="card-body">
                    {% include 'partials/form_fields.html' with style='stacked' %}
                </div>
                <div class="card-footer">
                    <button type="submit" class="btn btn-primary" data-loading-text="{% trans 'Sending...' %}">{% trans 'Send reset email' %}</button>
                </div>
            </form>
        </div>
        </div>
    </div>
    {% elif page_type == "resetting" %}
    <div class="container padding-bottom-3x mb-1 pt-md-5">
        <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
            <h2>{% trans "Email sent" %}</h2>
            <p>
                {% blocktrans %}
                    We've e-mailed you instructions for resetting your password. You should be receiving it shortly.
                {% endblocktrans %}
            </p>
            <p>
                {% blocktrans %}
                    If you don't receive an email, please make sure you've entered the address you registered with, and check
                    your spam folder.
                {% endblocktrans %}
            </p>
        </div>
        </div>
    </div>
    {% elif page_type in "new_password,reset_password" %}
    <div class="container padding-bottom-3x mb-1 pt-md-5">
        <div class="row justify-content-center">
          <div class="col-lg-8 col-md-10">
            {% if form %}
                <h2>{% trans 'Enter a new password' %} {{ user.email }}</h2>
                <p>{% trans "Please enter your new password twice so we can verify you typed it in correctly." %}</p>
                <form class="card mt-4" id="password_reset_form" action="." method="post">
                    {% csrf_token %}
                    <div class="card-body">
                       {% include 'partials/form_fields.html' with style='stacked' %}
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-primary" type="submit" data-loading-text="{% trans 'Changing...' %}">{% trans 'Change my password' %}</button>
                    </div>
                </form>
            {% elif not validlink %}
                <h2>{% trans 'Password reset unsuccessful' %}</h2>
                <p>{% trans "The password reset link was invalid, possibly because it has already been used.  Please request a new password reset." %}</p>
            {% endif %}
            </div>
        </div>
    </div>
    {% elif page_type == "reset_complete" %}
    <div class="container padding-bottom-3x mb-1 pt-md-5">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10">
                <h2>{% trans "Password reset complete" %}</h2>
                <p>{% trans "Your password has been set.  You may go ahead and log in now." %}</p>
                <p><a href="{{ login_url }}" class="btn btn-primary">{% trans 'Log in' %}</a></p>
            </div>
        </div>
    </div>
    {% elif page_type ==  'set_anonymous_password' %}
    <div class="container padding-bottom-3x mb-1 pt-md-5">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10">
            {% if validlink %}
                <h2>{% trans 'Welcome to your Account!' %}</h2>
                <p>{% blocktrans with site_name=site.name%}Create your password below to enjoy all of benefits of your {{ site_name }} account{% endblocktrans %}.</p>
                <ul>
                    <li> <strong>{% trans 'Manager Orders' %}</strong>- {% trans 'check on order status, tracking, and manage your orders' %}.</li>
                    <li><strong>{% trans 'Personal Settings' %}</strong>- {% trans 'Manage your shipping addresses, password, email address and language preferences' %}.</li>
                </ul>
                <form class="card mt-4" id="password_reset_form" action="." method="post">
                    {% csrf_token %}
                    <div class="card-body">
                        {% include 'partials/form_fields.html' with style='stacked' %}
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-primary" type="submit" data-loading-text="{% trans 'Continuing...' %}">{% trans 'Continue to Your Account' %}</button>
                    </div>
                </form>
            {% else %}
                <h2>{% trans 'Password reset unsuccessful' %}</h2>
                <p>{% trans "The password reset link was invalid, possibly because it has already been used.  Please request a new password reset." %}</p>
            {% endif %}
            </div>
        </div>
    </div>
    {% endif  %}
{% endblock %}
